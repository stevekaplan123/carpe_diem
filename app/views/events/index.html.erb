<p id="notice"><%= notice %></p>

<h1>Listing Events</h1>

<table>
  <thead>
    <tr>
      <th>Creator</th>
      <th>Event name</th>
      <th>Time creation</th>
      <th>Time occurrence</th>
      <th>Location</th>
      <th>Longitude</th>
      <th>Latitude</th>
      <th>Description</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @events.each do |event| %>
      <tr>
        <td><%= event.creator_id %></td>
        <td><%= event.event_name %></td>
        <td><%= event.time_creation %></td>
        <td><%= event.time_occurrence %></td>
        <td><%= event.location %></td>
        <td><%= event.longitude %></td>
        <td><%= event.latitude %></td>
        <td><%= event.description %></td>
        <td><%= link_to 'Show', event %></td>
        <td><%= link_to 'Edit', edit_event_path(event) %></td>
        <td><%= link_to 'Destroy', event, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

   <div id="map_canvas" style="width: 800px; height: 400px;"></div>


      <script type='text/javascript' src='//code.jquery.com/jquery-1.9.1.js'></script>
    <script type='text/javascript' src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type='text/javascript'>
        function loadXMLDoc()
        {
            var xmlhttp;
            if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
              xmlhttp=new XMLHttpRequest();
              }
            else
              {// code for IE6, IE5
              xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
            xmlhttp.onreadystatechange=function()
              {
              if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
                }
              }
              xmlhttp.open("GET","/events/filter.json",true);
              xmlhttp.send();
          }

        $(function(){
            var myOptions = {
                center: new google.maps.LatLng(42.3764852, -71.2356113),
                zoom: 10,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            gMap = new google.maps.Map(document.getElementById('map_canvas'), myOptions);

        });
    </script>
<br>
<button type="button" onclick="loadXMLDoc()">Request data</button>
<div id="myDiv"></div>
<%= link_to 'New Event', new_event_path %>
<%= link_to 'Back', root_path %>
